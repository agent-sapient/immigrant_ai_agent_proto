syntax = "proto3";

package api;
// 添加go_package选项
option go_package = "github.com/agent-sapient/immigrant_ai_agent_go/api;api";

// 引入 Google API 注解包，用于定义 HTTP 映射
import "google/api/annotations.proto";
import "google/protobuf/timestamp.proto";

// 基本信息
message BasicInfo {
  int64 id = 1 [json_name = "id"]; // 主键ID
  string code = 2 [json_name = "code"]; // 案件编码
  string name = 3 [json_name = "name"]; // 申请人姓名
  bool name_to_ai = 4 [json_name = "nameToAi"]; // 姓名是否传送给AI分析
  string birth_date = 5 [json_name = "birthDate"]; // 出生日期
  bool birth_date_to_ai = 6 [json_name = "birthDateToAi"]; // 出生日期是否传送给AI分析
  string work_unit = 7 [json_name = "workUnit"]; // 工作单位
  bool work_unit_to_ai = 8 [json_name = "workUnitToAi"]; // 工作单位是否传送给AI分析
  string position = 9 [json_name = "position"]; // 职位
  bool position_to_ai = 10 [json_name = "positionToAi"]; // 职位是否传送给AI分析
  string industry = 11 [json_name = "industry"]; // 行业
  bool industry_to_ai = 12 [json_name = "industryToAi"]; // 行业是否传送给AI分析
  string immigration_type = 13 [json_name = "immigrationType"]; // 移民类型
  bool immigration_type_to_ai = 14 [json_name = "immigrationTypeToAi"]; // 移民类型是否传送给AI分析
  string field = 15 [json_name = "field"]; // 专业领域
  bool field_to_ai = 16 [json_name = "fieldToAi"]; // 专业领域是否传送给AI分析
  string education = 17 [json_name = "education"]; // 教育背景
  bool education_to_ai = 18 [json_name = "educationToAi"]; // 教育背景是否传送给AI分析
  string major = 19 [json_name = "major"]; // 专业
  bool major_to_ai = 20 [json_name = "majorToAi"]; // 专业是否传送给AI分析
  google.protobuf.Timestamp created_at = 21 [json_name = "createdAt"]; // 创建时间
  google.protobuf.Timestamp updated_at = 22 [json_name = "updatedAt"]; // 更新时间
}

// 文件信息
message FileInfo {
  string id = 1 [json_name = "id"]; // 主键ID (BIGINT AUTO_INCREMENT)
  string parent_id = 2 [json_name = "parentId"]; // 父节点ID,根目录为NULL (BIGINT)
  string case_code = 3 [json_name = "caseCode"]; // 案件编号 (VARCHAR NOT NULL)
  string name = 4 [json_name = "name"]; // 文件或文件夹名称 (VARCHAR NOT NULL)
  bool is_dir = 5 [json_name = "isDir"]; // 是否为文件夹 1=文件夹 0=文件 (TINYINT NOT NULL)
  string size = 6 [json_name = "size"]; // 文件大小 (BIGINT DEFAULT 0)
  string type = 7 [json_name = "type"]; // 文件类型/扩展名，如jpg (VARCHAR)
  string url = 8 [json_name = "url"]; // MinIO中的路径(文件夹可为空) (VARCHAR)
  string url2 = 9 [json_name = "url2"]; // Word文档用作预览，当url是docx或doc格式时，无法用于前端浏览，需要转换为pdf，这是转换后的pdf文件路径 (VARCHAR)
  int32 order_by = 10 [json_name = "orderBy"]; // 排序序号 (INT DEFAULT 1)
  google.protobuf.Timestamp upload_time = 11 [json_name = "uploadTime"]; // 上传时间 (DATETIME DEFAULT CURRENT_TIMESTAMP)
  google.protobuf.Timestamp update_time = 12 [json_name = "updateTime"]; // 修改时间 (DATETIME DEFAULT CURRENT_TIMESTAMP)
  string file_label = 13 [json_name = "fileLabel"]; // 文件标签：NORMAL(普通)、BACKGROUND_INFO(背景信息)、RECOMMENDATIONS(推荐信)、PLAN_USA(赴美计划)、PERSONAL_STATEMENTS(个人陈述)、DIRECTORY(文件目录) (VARCHAR)
  string ai_text = 14 [json_name = "aiText"]; // AI生成的文本，上传基本信息后由AI生成的文本 (LONGTEXT)
}

// 背景信息
message BackgroundInfo {
  repeated string awards = 1 [json_name = "awards"]; // 奖项
  repeated string memberships = 2 [json_name = "memberships"]; // 会员
  repeated string reviews = 3 [json_name = "reviews"]; // 评审
  repeated string media_reports = 4 [json_name = "mediaReports"]; // 媒体报道
  repeated string original_contributions = 5 [json_name = "originalContributions"]; // 原创性贡献
  repeated string papers = 6 [json_name = "papers"]; // 论文
  repeated string exhibitions = 7 [json_name = "exhibitions"]; // 展览展示
  repeated string leadership = 8 [json_name = "leadership"]; // 领导力
  repeated string business_value = 9 [json_name = "businessValue"]; // 商业价值
  repeated string high_income = 10 [json_name = "highIncome"]; // 高收入
}

// 推荐人信息
message RecommenderInfo {
  string recommender_name = 1 [json_name = "recommenderName"]; // 推荐人姓名
  string birth_date = 2 [json_name = "birthDate"]; // 推荐人生日
  string work_unit = 3 [json_name = "workUnit"]; // 推荐人工作单位
  string position = 4 [json_name = "position"]; // 推荐人职位
  string online_introduction = 5 [json_name = "onlineIntroduction"]; // 在线介绍链接
  string field = 6 [json_name = "field"]; // 推荐人专业领域
  string industry = 7 [json_name = "industry"]; // 推荐人所在行业
  string relationship = 8 [json_name = "relationship"]; // 与申请人关系
  string shared_experience = 9 [json_name = "sharedExperience"]; // 共同经历
  string recommendation_style = 10 [json_name = "recommendationStyle"]; // 推荐信风格
}

// 推荐信
message RecommendationLetter {
  int64 id = 1 [json_name = "id"]; // 主键ID
  string recommender_name = 2 [json_name = "recommenderName"]; // 推荐人姓名
  string birth_date = 3 [json_name = "birthDate"]; // 推荐人生日
  string work_unit = 4 [json_name = "workUnit"]; // 推荐人工作单位
  string position = 5 [json_name = "position"]; // 推荐人职位
  string online_introduction = 6 [json_name = "onlineIntroduction"]; // 在线介绍链接
  string field = 7 [json_name = "field"]; // 推荐人专业领域
  string industry = 8 [json_name = "industry"]; // 推荐人所在行业
  string relationship = 9 [json_name = "relationship"]; // 与申请人关系
  string shared_experience = 10 [json_name = "sharedExperience"]; // 共同经历
  string recommendation_style = 11 [json_name = "recommendationStyle"]; // 推荐信风格
  string letter_content = 12 [json_name = "letterContent"]; // 推荐信内容
  google.protobuf.Timestamp create_time = 13 [json_name = "createTime"]; // 创建时间
  google.protobuf.Timestamp update_time = 14 [json_name = "updateTime"]; // 更新时间
}

// 简化版推荐信（用于生成申请材料请求）
message RecommendationLetterSimple {
  string recommender_name = 1 [json_name = "recommenderName"]; // 推荐人姓名
  string work_unit = 2 [json_name = "workUnit"]; // 推荐人工作单位
  string position = 3 [json_name = "position"]; // 推荐人职位
  string field = 4 [json_name = "field"]; // 推荐人专业领域
  string relationship = 5 [json_name = "relationship"]; // 与申请人关系
  string letter_content = 6 [json_name = "letterContent"]; // 推荐信内容
}

// 获取推荐信列表请求
message GetRecommendLetterRequest {
  BasicInfo basic_info = 1 [json_name = "basicInfo"]; // 基本信息
  BackgroundInfo background_info = 2 [json_name = "backgroundInfo"]; // 背景信息
  repeated RecommenderInfo recommender_infos = 3 [json_name = "recommenderInfos"]; // 推荐人信息
}
// 推荐信列表响应
message GetRecommendLetterResponse {
  message Result {
    repeated RecommendationLetter data = 3 [json_name = "data"]; // 推荐信列表数据
    int32 total = 4 [json_name = "total"]; // 总数
  }
  bool success = 1 [json_name = "success"]; // 是否成功
  string message = 2 [json_name = "message"]; // 响应消息
  Result result = 3 [json_name = "result"];// 结果
}

// 生成申请材料请求
message GenerateApplicationMaterialsRequest {
  BasicInfo basic_info = 1 [json_name = "basicInfo"]; // 基本信息
  BackgroundInfo background_info = 2 [json_name = "backgroundInfo"]; // 背景信息
  repeated RecommendationLetterSimple recommendation_letters = 3 [json_name = "recommendationLetters"]; // 推荐信列表
  repeated FileInfo file_list = 4 [json_name = "fileList"]; // 文件列表
}
// 生成申请材料响应
message GenerateApplicationMaterialsResponse {
  message Result {
    string personal_statement = 3 [json_name = "personalStatement"]; // 个人陈述
    string us_plan = 4 [json_name = "usPlan"]; // 赴美计划
    repeated FileInfo file_directory = 5 [json_name = "fileDirectory"]; // 文件目录
  }
  bool success = 1 [json_name = "success"]; // 是否成功
  string message = 2 [json_name = "message"]; // 响应消息
  Result result = 3 [json_name = "result"];// 结果
}

// 案件评测请求
message EvaluateCaseRequest {
  string personal_statement = 1 [json_name = "personalStatement"]; // 个人陈述
  string us_plan = 2 [json_name = "usPlan"]; // 赴美计划
  repeated FileInfo file_list = 3 [json_name = "fileList"]; // 文件列表
}

// 案件评测响应
message EvaluateCaseResponse {
  message Result {
    string evaluation_report = 3 [json_name = "evaluationReport"]; // 评测报告
  }
  bool success = 1 [json_name = "success"]; // 是否成功
  string message = 2 [json_name = "message"]; // 响应消息
  Result result = 3 [json_name = "result"];// 结果
}

// 获取申请人背景信息请求
message GetBackgroundInfoRequest {
  BasicInfo basic_info = 1 [json_name = "basicInfo"]; // 基本信息
  repeated FileInfo file_list = 2 [json_name = "fileList"]; // 文件列表
}

// 获取申请人背景信息响应
message GetBackgroundInfoResponse {
  message Result {
    BackgroundInfo background_info = 3 [json_name = "backgroundInfo"]; // 申请人背景信息
  }

  bool success = 1 [json_name = "success"]; // 是否成功
  string message = 2 [json_name = "message"]; // 响应消息
  Result result = 3 [json_name = "result"];

}




// 异步任务请求
message SubmitTaskRequest {
  oneof task_request {
    GetBackgroundInfoRequest get_background_info_request = 1; // 获取申请人背景信息
    GetRecommendLetterRequest get_recommend_letter_request = 2; // 获取推荐信列表
    GenerateApplicationMaterialsRequest generate_application_materials_request = 3; // 生成申请材料
    EvaluateCaseRequest evaluate_case_request = 4; // 案件评测
  }
  string callback_url = 5 [json_name = "callbackUrl"]; // 回调地址
}

// 异步任务响应
message SubmitTaskResponse {
  message Result {
    string task_id = 1 [json_name = "taskId"]; // 任务ID
  }
  bool success = 1 [json_name = "success"]; // 是否成功
  string message = 2 [json_name = "message"]; // 响应消息
  Result result = 10 [json_name = "result"];// 结果
}
// 异步任务响应
message Task {
  string task_id = 1 [json_name = "taskId"]; // 任务ID
  string status = 2 [json_name = "status"]; // 任务状态: PENDING, RUNNING, COMPLETED, FAILED
  google.protobuf.Timestamp created_at = 7 [json_name = "createdAt"]; // 创建时间
  google.protobuf.Timestamp updated_at = 8 [json_name = "updatedAt"]; // 更新时间
  string error_message = 9 [json_name = "errorMessage"]; // 错误信息
  double progress = 10 [json_name = "progress"]; // 任务进度 0-100
  oneof result {
    GetBackgroundInfoResponse get_background_info_response = 30;
    GetRecommendLetterResponse get_recommend_letter_response = 40;
    GenerateApplicationMaterialsResponse generate_application_materials_response = 50;
    EvaluateCaseResponse evaluate_case_response = 60;
  }
}

// 任务查询请求
message TaskQueryRequest {
  string task_id = 1 [json_name = "taskId"]; // 任务ID
}

// 任务查询响应
message TaskQueryResponse {
  message Result {
    Task task = 1 [json_name = "task"];// 任务
  }
  bool success = 1 [json_name = "success"]; // 是否成功
  string message = 2 [json_name = "message"]; // 响应消息
  Result result = 10 [json_name = "result"];// 结果
}

// 任务取消请求
message TaskCancelRequest {
  string task_id = 1 [json_name = "taskId"]; // 任务ID
}

// 任务取消响应
message TaskCancelResponse {
  bool success = 1 [json_name = "success"]; // 是否成功
  string message = 2 [json_name = "message"]; // 响应消息
}

// 护照状态查询请求
message PassportStatusQueryRequest {
  string visa_case_number = 1 [json_name = "visaCaseNumber"]; // 签证案例号，例如: GUZ2023510073
  string passport_number = 2 [json_name = "passportNumber"]; // 护照号，例如: EE8258725
  string surname = 3 [json_name = "surname"]; // 姓氏，例如: XU
  string visa_type = 4 [json_name = "visaType"]; // 签证类型，默认为 IV
  bool show_browser = 5 [json_name = "showBrowser"]; // 是否显示浏览器界面，默认隐藏
}

// 护照状态查询响应
message PassportStatusQueryResponse {
  message Result {
    bool success = 1 [json_name = "success"]; // 是否成功
    string message = 2 [json_name = "message"]; // 响应消息
    string captcha_recognized = 3 [json_name = "captchaRecognized"]; // 识别的验证码
    string final_url = 4 [json_name = "finalUrl"]; // 最终URL
    string page_title = 5 [json_name = "pageTitle"]; // 页面标题
    string html_file = 6 [json_name = "htmlFile"]; // HTML文件路径
    string screenshot = 7 [json_name = "screenshot"]; // 截图路径
    string output_dir = 8 [json_name = "outputDir"]; // 输出目录
    string query_result = 9 [json_name = "queryResult"]; // 查询结果消息
    bool has_data = 10 [json_name = "hasData"]; // 是否有数据
    string result_data = 11 [json_name = "resultData"]; // 结果数据
    string error_message = 12 [json_name = "errorMessage"]; // 错误消息（仅代码错误）
  }
  bool success = 1 [json_name = "success"]; // 是否成功
  string message = 2 [json_name = "message"]; // 响应消息
  Result result = 3 [json_name = "result"]; // 结果
}

// 数据源搜索任务定义
message DataSourceSearchTask {
  string search_query = 1 [json_name = "searchQuery"]; // 搜索查询
  string data_source = 2 [json_name = "dataSource"]; // 数据源类型: GOOGLE, LINKEDIN, ACADEMIC_DB等
  string parent_task_id = 4 [json_name = "parentTaskId"]; // 父任务ID
}

// 搜索结果
message SearchResult {
  string source = 1 [json_name = "source"]; // 数据来源
  string title = 2 [json_name = "title"]; // 标题
  string url = 3 [json_name = "url"]; // 链接
  string content = 4 [json_name = "content"]; // 内容
  float relevance_score = 5 [json_name = "relevanceScore"]; // 相关性得分
}

// 并行搜索结果
message ParallelSearchResult {
  repeated SearchResult results = 1 [json_name = "results"]; // 搜索结果列表
  string merged_result = 2 [json_name = "mergedResult"]; // 合并后的结果
  google.protobuf.Timestamp completed_at = 3 [json_name = "completedAt"]; // 完成时间
}

// 文件信息
message OutputFileInfo {
  string name = 1 [json_name = "name"]; // 文件名或文件夹名
  string path = 2 [json_name = "path"]; // 相对路径（相对于output目录）
  bool is_directory = 3 [json_name = "isDirectory"]; // 是否为目录
  int64 size = 4 [json_name = "size"]; // 文件大小（字节），目录为0
  google.protobuf.Timestamp modified_time = 5 [json_name = "modifiedTime"]; // 修改时间
}

// 列出输出文件请求
message ListOutputFilesRequest {
  string path = 1 [json_name = "path"]; // 可选：指定子路径，空字符串表示列出output根目录
}

// 列出输出文件响应
message ListOutputFilesResponse {
  message Result {
    repeated OutputFileInfo files = 1 [json_name = "files"]; // 文件列表
    string current_path = 2 [json_name = "currentPath"]; // 当前路径
  }
  bool success = 1 [json_name = "success"]; // 是否成功
  string message = 2 [json_name = "message"]; // 响应消息
  Result result = 3 [json_name = "result"]; // 结果
}

// 下载输出文件请求
message DownloadOutputFileRequest {
  string file_path = 1 [json_name = "filePath"]; // 文件路径（相对于output目录），例如: "automate_ceac_status_check_xxx/screenshot.png"
  bool as_zip = 2 [json_name = "asZip"]; // 如果是目录，是否打包成zip下载
}

// 下载输出文件响应（仅用于gRPC，FastAPI直接返回文件流）
message DownloadOutputFileResponse {
  string file_name = 1 [json_name = "fileName"]; // 文件名
  string content_type = 2 [json_name = "contentType"]; // 内容类型
  bytes file_content = 3 [json_name = "fileContent"]; // 文件内容（base64编码或直接字节）
  int64 file_size = 4 [json_name = "fileSize"]; // 文件大小
}

// 评估结果
message EvaluationResult {
  string category = 1 [json_name = "category"]; // 评估类别
  int32 score = 2 [json_name = "score"]; // 得分
  string description = 3 [json_name = "description"]; // 描述
}

// 生成策划案请求
message GeneratePlanRequest {
  int64 id = 1 [json_name = "id"]; // ID
  int64 member_id = 2 [json_name = "memberId"]; // 会员ID
  string name = 3 [json_name = "name"]; // 姓名
  string gender = 4 [json_name = "gender"]; // 性别
  int32 age = 5 [json_name = "age"]; // 年龄
  string marital_status = 6 [json_name = "maritalStatus"]; // 婚姻状况
  string education = 7 [json_name = "education"]; // 教育背景
  string major = 8 [json_name = "major"]; // 专业
  string graduated_school = 9 [json_name = "graduatedSchool"]; // 毕业院校
  string spouse_education = 10 [json_name = "spouseEducation"]; // 配偶教育背景
  string spouse_major = 11 [json_name = "spouseMajor"]; // 配偶专业
  int32 children_count = 12 [json_name = "childrenCount"]; // 子女数量
  bool has_children = 13 [json_name = "hasChildren"]; // 是否有子女
  string children_age = 14 [json_name = "childrenAge"]; // 子女年龄
  string children_status = 15 [json_name = "childrenStatus"]; // 子女状态
  string phone = 16 [json_name = "phone"]; // 电话
  string email = 17 [json_name = "email"]; // 邮箱
  string wechat = 18 [json_name = "wechat"]; // 微信
  string account_location = 19 [json_name = "accountLocation"]; // 账户所在地
  string current_residence = 20 [json_name = "currentResidence"]; // 现居住地
  string political_status = 21 [json_name = "politicalStatus"]; // 政治面貌
  string military_service = 22 [json_name = "militaryService"]; // 服兵役情况
  bool has_criminal_record = 23 [json_name = "hasCriminalRecord"]; // 是否有犯罪记录
  string criminal_record = 24 [json_name = "criminalRecord"]; // 犯罪记录
  string immigration_intent = 25 [json_name = "immigrationIntent"]; // 移民意向
  string application_date = 26 [json_name = "applicationDate"]; // 申请日期
  string visa_type = 27 [json_name = "visaType"]; // 签证类型
  string application_category = 28 [json_name = "applicationCategory"]; // 申请类别
  string application_category_desc = 29 [json_name = "applicationCategoryDesc"]; // 申请类别描述
  string us_immigration_category = 30 [json_name = "usImmigrationCategory"]; // 美国移民类别
  string us_immigration_apply_date = 31 [json_name = "usImmigrationApplyDate"]; // 美国移民申请日期
  string us_immigration_result = 32 [json_name = "usImmigrationResult"]; // 美国移民结果
  string applied_us_immigration = 33 [json_name = "appliedUsImmigration"]; // 是否申请过美国移民
  string applied_us_visa = 34 [json_name = "appliedUsVisa"]; // 是否申请过美国签证
  string us_visa_category = 35 [json_name = "usVisaCategory"]; // 美国签证类别
  string us_visa_category_desc = 36 [json_name = "usVisaCategoryDesc"]; // 美国签证类别描述
  string us_visa_status = 37 [json_name = "usVisaStatus"]; // 美国签证状态
  string us_visa_valid = 38 [json_name = "usVisaValid"]; // 美国签证是否有效
  string us_visa_result = 39 [json_name = "usVisaResult"]; // 美国签证结果
  string b_visa_validity_type = 40 [json_name = "bVisaValidityType"]; // B签证有效期类型
  string evus_status = 41 [json_name = "evusStatus"]; // EVUS状态
  string evus_status_desc = 42 [json_name = "evusStatusDesc"]; // EVUS状态描述
  string evus_last_update_date = 43 [json_name = "evusLastUpdateDate"]; // EVUS最后更新日期
  string visa_status = 44 [json_name = "visaStatus"]; // 签证状态
  string result = 45 [json_name = "result"]; // 结果
  string apply_type = 46 [json_name = "applyType"]; // 申请类型
  string current_job = 47 [json_name = "currentJob"]; // 当前工作
  string current_employer = 48 [json_name = "currentEmployer"]; // 当前雇主
  string current_position = 49 [json_name = "currentPosition"]; // 当前职位
  string work_experience = 50 [json_name = "workExperience"]; // 工作经验
  string company_info = 51 [json_name = "companyInfo"]; // 公司信息
  string core_assets = 52 [json_name = "coreAssets"]; // 核心资产
  string supplement_info = 53 [json_name = "supplementInfo"]; // 补充信息
  string awards = 54 [json_name = "awards"]; // 奖项
  bool has_national_or_international_award = 55 [json_name = "hasNationalOrInternationalAward"]; // 是否有国家级或国际级奖项
  string national_or_international_award_name = 56 [json_name = "nationalOrInternationalAwardName"]; // 国家级或国际级奖项名称
  int32 national_or_international_award_count = 57 [json_name = "nationalOrInternationalAwardCount"]; // 国家级或国际级奖项数量
  bool has_provincial_or_association_award = 58 [json_name = "hasProvincialOrAssociationAward"]; // 是否有省级或协会级奖项
  string provincial_or_association_award_name = 59 [json_name = "provincialOrAssociationAwardName"]; // 省级或协会级奖项名称
  int32 provincial_or_association_award_count = 60 [json_name = "provincialOrAssociationAwardCount"]; // 省级或协会级奖项数量
  string academic_achievements = 61 [json_name = "academicAchievements"]; // 学术成就
  bool has_academic_paper_citation = 62 [json_name = "hasAcademicPaperCitation"]; // 是否有学术论文引用
  int32 citation_count = 63 [json_name = "citationCount"]; // 引用次数
  bool has_core_journal_or_conference_paper = 64 [json_name = "hasCoreJournalOrConferencePaper"]; // 是否有核心期刊或会议论文
  string core_journal_or_conference_paper_types = 65 [json_name = "coreJournalOrConferencePaperTypes"]; // 核心期刊或会议论文类型
  int32 core_journal_or_conference_paper_count = 66 [json_name = "coreJournalOrConferencePaperCount"]; // 核心期刊或会议论文数量
  string media_recognition = 67 [json_name = "mediaRecognition"]; // 媒体认可
  bool has_media_recognition = 68 [json_name = "hasMediaRecognition"]; // 是否有媒体认可
  string media_platform_types = 69 [json_name = "mediaPlatformTypes"]; // 媒体平台类型
  string media_platform_other = 70 [json_name = "mediaPlatformOther"]; // 其他媒体平台
  int32 media_recognition_count = 71 [json_name = "mediaRecognitionCount"]; // 媒体认可次数
  string professional_membership = 72 [json_name = "professionalMembership"]; // 专业会员资格
  bool has_national_or_international_association = 73 [json_name = "hasNationalOrInternationalAssociation"]; // 是否有国家级或国际级协会
  string association_roles = 74 [json_name = "associationRoles"]; // 协会角色
  int32 association_count = 75 [json_name = "associationCount"]; // 协会数量
  string judge_experience = 76 [json_name = "judgeExperience"]; // 评审经验
  string review_roles = 77 [json_name = "reviewRoles"]; // 评审角色
  int32 review_role_count = 78 [json_name = "reviewRoleCount"]; // 评审角色数量
  string original_contribution = 79 [json_name = "originalContribution"]; // 原创贡献
  bool has_breakthrough_theory_or_tech = 80 [json_name = "hasBreakthroughTheoryOrTech"]; // 是否有突破性理论或技术
  int32 breakthrough_theory_or_tech_count = 81 [json_name = "breakthroughTheoryOrTechCount"]; // 突破性理论或技术数量
  string leadership = 82 [json_name = "leadership"]; // 领导力
  bool has_landmark_project_or_case = 83 [json_name = "hasLandmarkProjectOrCase"]; // 是否有标志性项目或案例
  int32 landmark_project_or_case_count = 84 [json_name = "landmarkProjectOrCaseCount"]; // 标志性项目或案例数量
  string high_salary = 85 [json_name = "highSalary"]; // 高薪
  string commercial_success = 86 [json_name = "commercialSuccess"]; // 商业成功
  string economic_achievement_types = 87 [json_name = "economicAchievementTypes"]; // 经济成就类型
  bool has_invention_patent = 88 [json_name = "hasInventionPatent"]; // 是否有发明专利
  int32 invention_patent_count = 89 [json_name = "inventionPatentCount"]; // 发明专利数量
  bool has_software_copyright = 90 [json_name = "hasSoftwareCopyright"]; // 是否有软件著作权
  int32 software_copyright_count = 91 [json_name = "softwareCopyrightCount"]; // 软件著作权数量
  bool has_national_or_international_project = 92 [json_name = "hasNationalOrInternationalProject"]; // 是否有国家级或国际级项目
  int32 national_or_international_project_count = 93 [json_name = "nationalOrInternationalProjectCount"]; // 国家级或国际级项目数量
  bool has_international_activity = 94 [json_name = "hasInternationalActivity"]; // 是否有国际活动
  string international_activity_types = 95 [json_name = "internationalActivityTypes"]; // 国际活动类型
  bool has_social_title_or_honor = 96 [json_name = "hasSocialTitleOrHonor"]; // 是否有社会头衔或荣誉
  string social_title_or_honor_types = 97 [json_name = "socialTitleOrHonorTypes"]; // 社会头衔或荣誉类型
  string social_title_or_honor_other = 98 [json_name = "socialTitleOrHonorOther"]; // 其他社会头衔或荣誉
  bool has_special_achievement = 99 [json_name = "hasSpecialAchievement"]; // 是否有特殊成就
  string special_achievement_types = 100 [json_name = "specialAchievementTypes"]; // 特殊成就类型
  bool has_us_document = 101 [json_name = "hasUsDocument"]; // 是否有美国文件
  string us_document_types = 102 [json_name = "usDocumentTypes"]; // 美国文件类型
  string business_industry_value = 103 [json_name = "businessIndustryValue"]; // 商业行业价值
  google.protobuf.Timestamp created_at = 104 [json_name = "createdAt"]; // 创建时间
  google.protobuf.Timestamp updated_at = 105 [json_name = "updatedAt"]; // 更新时间
}

// 生成策划案响应
message GeneratePlanResponse {
  message Result {
    string plan = 1 [json_name = "plan"]; // 策划案内容
    repeated EvaluationResult evaluation_results = 2 [json_name = "evaluationResults"]; // 评估结果列表
  }
  bool success = 1 [json_name = "success"]; // 是否成功
  string message = 2 [json_name = "message"]; // 响应消息
  Result result = 3 [json_name = "result"]; // 结果
}

// 移民AI代理服务
service ImmigrantAIAgent {
  // 生成策划案:根据请求信息返回策划结果
  rpc GeneratePlan(GeneratePlanRequest) returns (GeneratePlanResponse) {
    option (google.api.http) = {
      post: "/api/pre-review/generatePlan"
      body: "*"
    };
  }
  // 获取申请人背景信息:使用agent实现全网搜索
  rpc GetBackgroundInfo(GetBackgroundInfoRequest) returns (GetBackgroundInfoResponse) {
    option (google.api.http) = {
      post: "/api/pre-review/getBackgroundInfo"
      body: "*"
    };
  }

  // 获取推荐信列表:使用ai生成推荐信
  rpc GetRecommendLetter(GetRecommendLetterRequest) returns (GetRecommendLetterResponse) {
    option (google.api.http) = {
      post: "/api/pre-review/getRecommondLetter"
      body: "*"
    };
  }

  // 生成申请材料（个人陈述、赴美计划、文件目录）-使用ai生成
  rpc GenerateApplicationMaterials(GenerateApplicationMaterialsRequest) returns (GenerateApplicationMaterialsResponse) {
    option (google.api.http) = {
      post: "/api/pre-review/generateApplicationMaterials"
      body: "*"
    };
  }

  // 案件评测-使用ai分析
  rpc EvaluateCase(EvaluateCaseRequest) returns (EvaluateCaseResponse) {
    option (google.api.http) = {
      post: "/api/pre-review/evaluateCase"
      body: "*"
    };
  }
  
  // 提交异步任务
  rpc SubmitTask(SubmitTaskRequest) returns (SubmitTaskResponse) {
    option (google.api.http) = {
      post: "/api/task/submit"
      body: "*"
    };
  }

  // 查询任务状态
  rpc TaskQuery(TaskQueryRequest) returns (TaskQueryResponse) {
    option (google.api.http) = {
      post: "/api/task/query"
      body: "*"
    };
  }

  // 取消任务
  rpc CancelTask(TaskCancelRequest) returns (TaskCancelResponse) {
    option (google.api.http) = {
      post: "/api/task/cancel"
      body: "*"
    };
  }

  // 护照状态查询:快速查询CEAC护照状态
  rpc PassportStatusQuery(PassportStatusQueryRequest) returns (PassportStatusQueryResponse) {
    option (google.api.http) = {
      post: "/api/passport/statusQuery"
      body: "*"
    };
  }

  // 列出输出文件:列出output文件夹下的所有文件和文件夹
  rpc ListOutputFiles(ListOutputFilesRequest) returns (ListOutputFilesResponse) {
    option (google.api.http) = {
      post: "/api/output/listFiles"
      body: "*"
    };
  }

  // 下载输出文件:下载output文件夹下的指定文件或文件夹
  rpc DownloadOutputFile(DownloadOutputFileRequest) returns (DownloadOutputFileResponse) {
    option (google.api.http) = {
      post: "/api/output/download"
      body: "*"
    };
  }

}